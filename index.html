<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NTB Challenge — 학년별 100제</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
      :root{
        --fg:#222;--muted:#8a8a8a;--bg:#fafafa;--paper:#fff;--chip:#f2f2f2;
        --primary:#C4A484;--primary-600:#b89878;--choice:#f4f4f5;--choice-hover:#ececee;
        --ok:#22c55e;--bad:#ef4444;--content-w:860px;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.45 "Inter","Noto Sans KR",system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial}
      .topbar{position:sticky;top:0;z-index:50;background:var(--paper);border-bottom:1px solid #eee;padding:14px 18px;display:flex;justify-content:space-between;align-items:center}
      .brand{margin:0;font-size:22px;font-weight:800}
      .toolbar{display:flex;gap:8px;align-items:center}
      .chip{background:var(--chip);padding:6px 12px;border-radius:999px;color:#444;font-size:14px}
      .btn{border:0;border-radius:12px;padding:12px 18px;cursor:pointer;transition:.18s transform,.18s background,.18s box-shadow;font-weight:800}
      .btn:hover{transform:translateY(-1px)}
      .btn:disabled{opacity:.6;cursor:not-allowed;transform:none}
      .btn-primary{background:var(--primary);color:#fff}
      .btn-primary:hover{background:var(--primary-600)}
      .btn-ghost{background:#f3f3f3;color:#333}
      .btn-ghost:hover{background:#e9e9e9}
      .btn.small{padding:8px 12px;border-radius:10px}
      .btn.large{padding:14px 20px}
      .btn.xlarge{padding:16px 22px;font-size:18px}
      .view{display:none;padding:18px}
      .view.active{display:block}
      .home{max-width:780px;margin:24px auto}
      .lead{text-align:center;margin:12px 0 12px 0;color:var(--muted)}
      .grid.sets{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;max-width:560px;margin:0 auto}
      .levels, .mode-select{max-width:760px;margin:12px auto}
      .levels .bar, .mode-select .bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
      .hint{text-align:center;color:var(--muted);margin:14px 0}
      .level-buttons, .mode-buttons{max-width:560px;margin:0 auto;gap:12px;display:flex;flex-direction:column}
      .status{display:flex;justify-content:space-between;align-items:center;max-width:var(--content-w);margin:6px auto 0 auto}
      .quiz-wrap{position:relative;max-width:var(--content-w);margin:24px auto}
      .word{text-align:center;font-size:44px;margin:24px 0 18px 0;font-weight:900;letter-spacing:.2px}
      .choices{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;min-height:330px}
      .choices.hidden{visibility:hidden}
      .choice{background:var(--choice);border-radius:14px;padding:16px 14px;text-align:center;font-weight:800;cursor:pointer;border:2px solid transparent}
      .choice:hover{background:var(--choice-hover)}
      .choice.correct{border-color:var(--ok);background:#ecfdf5}
      .choice.wrong{border-color:var(--bad);background:#fef2f2}
      .controls-dock{position:sticky;bottom:12px;display:flex;justify-content:flex-end;gap:10px;padding:10px 0;margin-top:18px;z-index:40}
      .modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;z-index:60}
      .modal.hidden{display:none}
      .modal-card{background:#fff;border-radius:16px;max-width:520px;width:92vw;padding:26px 22px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.15)}
      .result-title{font-size:28px;margin:0 0 8px 0}
      .result-detail{font-size:18px;color:#555;margin:0 0 18px 0}
      .modal-card input{width:100%;padding:12px 14px;font-size:16px;border:1px solid #e6e6e6;border-radius:10px}
      .modal-card .desc{color:#777;margin:8px 0 16px}
      .end-level-wrap{text-align:center;margin-top:48px;}
      .end-level-title{font-size:32px; font-weight:900; margin:0 0 12px 0;}
      .end-level-buttons{display:flex; justify-content:center; gap:12px; margin-top:24px;}
      .review-wrap{max-width:var(--content-w); margin:24px auto;}
      .review-header{text-align:center; margin-bottom: 24px;}
      .review-title{font-size:28px; font-weight:800; margin:0;}
      .review-list{display:flex; flex-direction:column; gap:16px;}
      .review-card{background:var(--paper); border-radius:14px; padding:20px; border:1px solid #eee; text-align: left;}
      .review-card h3{margin:0 0 12px 0; font-size:22px;}
      .review-card h3 span{font-weight:400; color:var(--muted); margin-left:8px; font-size:18px;}
      .review-card p{margin:4px 0 10px 0; line-height:1.6;}
      .review-card strong{font-weight:700; color:var(--primary);}
      .review-footer{text-align:center; margin-top:32px;}
      @media (max-width:520px){
        .word{font-size:36px}
        .btn.large{padding:12px 16px}
        .grid.sets{grid-template-columns:repeat(1,minmax(0,1fr));}
        .choices{min-height:280px}
      }
    </style>
</head>
<body>
    <header class="topbar">
        <h1 class="brand">NTB Challenge</h1>
        <div class="toolbar">
            <span id="crumb" class="chip">세트 선택</span>
            <button id="home-btn" class="btn btn-ghost small" style="display:none">🏠</button>
            <button id="tts-btn" class="btn btn-ghost small" title="다시 듣기" style="display:none">🔊</button>
        </div>
    </header>

    <!-- 1) 세트 선택 -->
    <section id="view-sets" class="view active">
        <div class="home">
            <p class="lead">원하는 세트를 선택하세요 (각 100문제)</p>
            <div class="grid sets">
                <button class="btn btn-primary" data-set="elem">초등 100개</button>
                <button class="btn btn-ghost" data-set="mid">중등 100개</button>
                <button class="btn btn-ghost" data-set="high">고등 100개</button>
                <button class="btn btn-ghost" data-set="uni">대학 100개</button>
                <button class="btn btn-ghost" data-set="gre">GRE 100개</button>
            </div>
        </div>
    </section>

    <!-- 2) 단계 선택 -->
    <section id="view-levels" class="view">
        <div class="levels">
            <div class="bar">
                <span id="chosen-set" class="chip"></span>
            </div>
            <div class="hint">난이도를 선택하세요 (보기 개수)</div>
            <div class="level-buttons">
                <button class="btn btn-primary" data-level="1">1단계 (2지선다)</button>
                <button class="btn btn-ghost" data-level="2">2단계 (4지선다)</button>
                <button class="btn btn-ghost" data-level="3">3단계 (6지선다)</button>
                <button class="btn btn-ghost" data-level="4">4단계 (테스트 · 8지선다 · 6초)</button>
            </div>
        </div>
    </section>

    <!-- 2-1) 3단계 방식 선택 -->
    <section id="view-level3-mode" class="view">
        <div class="mode-select">
            <div class="bar">
                <span id="chosen-set-mode" class="chip"></span>
            </div>
            <div class="hint">3단계 학습 방식을 선택하세요</div>
            <div class="mode-buttons">
                <button class="btn btn-primary" data-direction="en-ko">단어 제시 (영단어 → 뜻)</button>
                <button class="btn btn-ghost" data-direction="ko-en">뜻 제시 (뜻 → 영단어)</button>
            </div>
        </div>
    </section>

    <!-- 3) 퀴즈 -->
    <section id="view-quiz" class="view">
        <div class="status">
            <span id="status-chip" class="chip"></span>
            <span id="timer-chip" class="chip" style="display:none">⏱ 6s</span>
        </div>
        <div class="quiz-wrap">
            <h2 id="word" class="word">word</h2>
            <div id="choices" class="choices hidden"></div>
            <div class="controls-dock">
                <button id="idk-btn" class="btn btn-ghost large">모름</button>
                <button id="toggle-choices-btn" class="btn btn-ghost large">보기</button>
            </div>
        </div>
    </section>
    
    <!-- 4) 단계 완료 -->
    <section id="view-end-level" class="view">
        <div class="end-level-wrap">
            <h2 id="end-level-title" class="end-level-title"></h2>
            <p class="lead">수고하셨습니다!</p>
            <div class="end-level-buttons">
                <button id="retry-btn" class="btn btn-ghost large">재도전</button>
                <button id="review-wrong-btn" class="btn btn-primary large" style="display:none;">오답 학습</button>
                <button id="next-level-btn" class="btn btn-primary large">다음 단계로</button>
            </div>
        </div>
    </section>

    <!-- 5) 오답 학습 -->
    <section id="view-review" class="view">
        <div class="review-wrap">
            <div class="review-header">
                <h2 class="review-title">오답 학습</h2>
                <p class="lead">틀린 단어를 다시 학습하여 완벽하게 마스터하세요.</p>
            </div>
            <div id="review-list-container"></div>
            <div class="review-footer">
                <button id="review-home-btn" class="btn btn-ghost large">처음으로</button>
            </div>
        </div>
    </section>

    <!-- 결과 모달 (정답/오답) -->
    <div id="result-modal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-card">
            <h3 id="result-title" class="result-title">정답</h3>
            <p id="result-detail" class="result-detail"></p>
            <button id="modal-next" class="btn btn-primary xlarge">다음 문제로</button>
        </div>
    </div>

    <!-- 아이디 입력 모달 (4단계 전용) -->
    <div id="id-modal" class="modal hidden" role="dialog" aria-modal="true">
        <div class="modal-card">
            <h3 class="result-title" style="margin-bottom:6px">아이디 입력</h3>
            <p class="desc">4단계(테스트) 결과 저장을 위해 아이디를 입력하세요.</p>
            <input id="user-id-input" type="text" placeholder="예: ntb01" />
            <div style="display:flex;gap:10px;justify-content:center;margin-top:16px">
                <button id="id-cancel" class="btn btn-ghost">취소</button>
                <button id="id-start" class="btn btn-primary">시작</button>
            </div>
        </div>
    </div>

    <!-- 스크립트 파일 로드 -->
    <script src="./js/data.js"></script>
    <script src="./js/main.js"></script>
</body>
</html>
